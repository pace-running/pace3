{% extends "includes/base.html" %} {% block title %}Join{% endblock title %} {%
block content %} {% raw %}
<head><meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<script src="/static/js/petite-vue.js" defer init></script>

<h1>Anmeldung</h1>
<p>Persönliche Angaben</p>
<form
  action="summary"
  method="post"
  onclick=""
  v-scope="{confirm_checked: false, tshirt_checked: false}"
>
  <input
    type="text"
    name="firstname"
    placeholder="Vorname (erscheint auf Startnummer)"
  />
  <input type="text" name="lastname" placeholder="Nachname" />
  <input
    type="text"
    name="team"
    placeholder="Teamname (erscheint auf Startnummer)"
  />
  <input type="email" name="email" placeholder="E-Mail" />
  <input type="email" name="repeat" placeholder="E-Mail wiederholen" />

  <label for="starting_point">Von wo wirst du laufen?:</label>
  <select name="starting_point">
    <option value="null" style="display: none">Bitte auswählen</option>
    <option value="hamburg">in Hamburg bei der Alster vor Ort</option>
    <option value="other">woanders</option></select
  ><br />

  <label for="running_level">Wie schätzt du dein Laufniveau ein?:</label>
  <select name="running_level">
    <option value="null" style="display: none">Bitte auswählen</option>
    <option value="rarely">Ich laufe selten</option>
    <option value="sometimes">Ich laufe gelegentlich bis regelmäßig</option>
    <option value="often">Ich laufe häufig und ambitioniert</option></select
  ><br />

  <label for="donation">Ich möchte spenden (mindestens 5€):</label>
  <input
    type="text"
    name="donation"
    placeholder="Ich möchte spenden (mindestens 5€)"
    value="10"
  /><br />

  <h2>Fan T-shirt</h2>

  <label style>
    <input
      type="checkbox"
      id="tshirt"
      name="tshirt_toggle"
      v-model="tshirt_checked"
    />
    <span class="checkable small">Ich möchte ein T-Shirt</span>
  </label>
  <input type="button" class="small" style="width: 150px; margin-left: 100px;" value="Vorschau" id="tshirt_preview">
  <input type="button" class="small" style="width: 150px; margin-left: 100px;" value="Größentabelle" id="tshirt_sizes">
  <br />
  

  <template v-if="tshirt_checked === true">
    <label for="tshirt_model">Modell</label>
    <select name="tshirt_model" id="model_selector">
      <option value="null" style="display: none">Bitte auswählen</option>
      <option value="unisex">Unisex</option>
      <option value="slimfit">Talliert</option></select
    ><br />
    <script>
    document.getElementById('model_selector').addEventListener('change',function(){
      if(document.getElementById('model_selector').value === 'unisex') {
        document.getElementById('xxl_selector').hidden = false;
      } else {
        document.getElementById('xxl_selector').hidden = true;
        if(document.getElementById('size_selector').value === 'xxl'){
          document.getElementById('size_selector').value = 'xl';
        }
      }
    });
  
    </script>


      <label for="tshirt_size">Größe</label>
      <select name="tshirt_size" id="size_selector">
        <option value="null" style="display: none">Bitte auswählen</option>
        <option value="s">S</option>
        <option value="m">M</option>
        <option value="l">L</option>
        <option value="xl">XL</option>
        <option value="xxl" id="xxl_selector" hidden>XXL</option>
      </select>
        <br />

    <h3>Lieferanschrift</h3>

    <input
      type="text"
      name="country"
      placeholder="Land"
      default="Deutschland"
    /><br />
    <input type="text" name="address_firstname" placeholder="Vorname" /><br />
    <input type="text" name="address_lastname" placeholder="Nachname" /><br />
    <input type="text" name="street_name" placeholder="Straße" />
    <input type="text" name="house_number" placeholder="Hausnummer" /><br />
    <input type="text" name="address_extra" placeholder="Adresszusatz" /><br />
    <input type="text" name="postal_code" placeholder="PLZ" />
    <input type="text" name="city" placeholder="Stadt" /><br /> </template
  ><br />


  <!-- Show Tshirt Info: -->
  <div id="tshirt_sizes_modal" class="modal hidden" >
    <button type='button' class="close-modal small" id="closeButton1">&times;</button>
    <h1>T-Shirt - Größentabelle</h1>
    <p>alle Maße in cm</p>
    <div>
      <div style="padding-bottom: 25px">
        <h2>Tailliert:</h2>
        <div style="overflow-x: auto;">
          <table class="center" id="slimfit_table">
            <tr>
              <th>Size</th>
              <th>Length</th>
              <th>Width</th>
            </tr>
            </thead>
            <tbody>
              <tr>
                <td>S</td>
                <td>61</td>
                <td>41</td>
              </tr>
              <tr>
                <td>M</td>
                <td>63</td>
                <td>44</td>
              </tr>
              <tr>
                <td>L</td>
                <td>65</td>
                <td>47</td>
              </tr>
              <tr>
                <td>XL</td>
                <td>67</td>
                <td>50</td>
              </tr>
          </table>
        </div>
      </div>
    
      <div>
        <h2>Unisex:</h2>
        <div style="overflow-x: auto;">
          <table class="center" id="unisex_table">
            <tr>
              <th>Size</th>
              <th>Length</th>
              <th>Width</th>
            </tr>
            <tr>
              <td>S</td>
              <td>69</td>
              <td>50</td>
            </tr>
            <tr>
              <td>M</td>
              <td>72</td>
              <td>53</td>
            </tr>
            <tr>
              <td>L</td>
              <td>74</td>
              <td>56</td>
            </tr>
            <tr>
              <td>XL</td>
              <td>76</td>
              <td>58</td>
            </tr>
            <tr>
              <td>XXL</td>
              <td>78</td>
              <td>62</td>
            </tr>
          </table>
        </div>
      </div>
    </div>
    </div>

    <div class="overlay hidden"></div>
      
    <div id="tshirt_preview_modal" class="modal hidden">
      <button type='button' class="close-modal small" id="closeButton2">&times;</button>
      <h1>Tshirt - Vorschau</h1>
      <!-- preview image -->
    </div>

<script>
  let currentModal = document.getElementById('tshirt_sizes_modal');

  document.getElementById('tshirt_sizes').addEventListener('click',function(){
    document.getElementById('tshirt_sizes_modal').classList.remove('hidden');
    document.querySelector('.overlay').classList.remove('hidden');
    currentModal = document.getElementById('tshirt_sizes_modal');
  });
  
  document.getElementById('tshirt_preview').addEventListener('click',function(){
    document.getElementById('tshirt_preview_modal').classList.remove('hidden');
    document.querySelector('.overlay').classList.remove('hidden');
    currentModal = document.getElementById('tshirt_preview_modal');
  });

  const closeModal = function() {
    currentModal.classList.add('hidden');
    document.querySelector('.overlay').classList.add('hidden');
  }


  document.getElementById('closeButton1').addEventListener('click',closeModal);
  document.getElementById('closeButton2').addEventListener('click',closeModal);
  document.querySelector('.overlay').addEventListener('click',closeModal);
  document.addEventListener('keydown',function(e){
    if(e.key === "Escape") closeModal();
  });


</script>



  <!-- Hidden inputs, so form will be accepted even if no Tshirt ordered -->
  <template v-if="tshirt_checked == false">
    <input type="hidden" name="tshirt_toggle" value="" />
    <input type="hidden" name="tshirt_model" value="" />
    <input type="hidden" name="tshirt_size" value="" />
    <input type="hidden" name="country" value="" />
    <input type="hidden" name="address_firstname" value="" />
    <input type="hidden" name="address_lastname" value="" />
    <input type="hidden" name="street_name" value="" />
    <input type="hidden" name="house_number" value="" />
    <input type="hidden" name="address_extra" value="" />
    <input type="hidden" name="postal_code" value="" />
    <input type="hidden" name="city" value="" />
  </template>

  <label>
    <input type="checkbox" name="confirm" v-model="confirm_checked" />
    <span class="checkable small"
      >Mir ist bewusst, dass die Datenverarbeitung entsprechend der
      <a class="link" href="/privacy_notice" target="_blank">Datenschutzbestimmungen</a> der
      Website lauf-gegen-rechts.de erfolgt. Ich weiß, dass meine Einwilligung
      bezüglich der Verarbeitung meiner Daten (Vorname, Nachname, E-Mail,
      Teamname freiwillig ist und ich sie jederzeit widerrufen kann.</span
    >
  </label>
  <br />
  <button type="submit" :disabled="confirm_checked == false">Weiter</button>
</form>

{% endraw %} {% endblock content %}
